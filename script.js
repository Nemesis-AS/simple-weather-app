const weatherImage=document.querySelector("img.weather-icon"),tempDiv=document.querySelector(".temp-mag"),unitDiv=document.querySelector(".temp-unit"),captionDiv=document.querySelector(".caption"),unitBtn=document.querySelector("button.unit-btn"),unitParameters={C:"metric",F:"imperial"};let tempUnit="C";function getLocation(){navigator.geolocation.getCurrentPosition(getWeatherStatus,e=>console.error(`ERROR${e.code}: `+e.message))}async function getWeatherStatus(temp){var weather=temp.coords;let res=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${weather.latitude}&lon=${weather.longitude}&appid=7ad399f7a4f4ea29190d3cd20bb709e4&units=`+unitParameters[tempUnit]);temp=await res.json(),weather=temp.weather[0],temp=temp.main.temp;updateElements(weather.icon,temp,weather.main)}function updateElements(icon,temp,title){weatherImage.src=`http://openweathermap.org/img/wn/${icon}@4x.png`,tempDiv.textContent=""+temp,unitDiv.textContent="°"+tempUnit,captionDiv.textContent=title}navigator.geolocation?getLocation():alert("Geolocation Not Available!"),unitBtn.addEventListener("click",e=>{"C"===tempUnit?(tempUnit="F",unitBtn.textContent="°C"):(tempUnit="C",unitBtn.textContent="°F"),getLocation()});